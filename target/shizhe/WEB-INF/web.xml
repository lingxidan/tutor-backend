<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!--
  - This is the Cocoon web-app configurations file
  -
  - $Id$
  -->
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
          http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">
<!--<web-app version="2.4"-->
         <!--xmlns="http://java.sun.com/xml/ns/j2ee"-->
         <!--xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"-->
         <!--xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_3_0.xsd">-->
  <display-name>Archetype Created Web Application</display-name>

  <display-name>Archetype Created Web Application</display-name>

  <!--配置springMvc乱码过滤-->
  <filter>
    <filter-name>encoding</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>encoding</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <!-- 添加druid监控-->
  <servlet>
    <servlet-name>DruidStatView</servlet-name>
    <servlet-class>com.alibaba.druid.support.http.StatViewServlet</servlet-class>
    <!--deny优先于allow，如果在deny列表中，就算在allow列表中，也会被拒绝。
    如果allow没有配置或者为空，则允许所有访问-->
    <init-param>
      <param-name>allow</param-name>
      <param-value></param-value>
    </init-param>
    <init-param>
      <param-name>resetEnable</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>loginUsername</param-name>
      <param-value>farm</param-value>
    </init-param>
    <init-param>
      <param-name>loginPassword</param-name>
      <param-value>farm</param-value>
    </init-param>
  </servlet>
  <servlet-mapping>
    <servlet-name>DruidStatView</servlet-name>
    <url-pattern>/druid/*</url-pattern>
  </servlet-mapping>

  <!-- 添加Web应用等监控-->
  <filter>
    <filter-name>DruidWebStatFilter</filter-name>
    <filter-class>com.alibaba.druid.support.http.WebStatFilter</filter-class>
    <init-param>
      <param-name>exclusions</param-name>
      <param-value>*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*</param-value>
    </init-param>
    <init-param>
      <param-name>profileEnable</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>DruidWebStatFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <!--Xss攻击配置-->
  <!--<filter>-->
    <!--<filter-name>xssFilter</filter-name>-->
    <!--<filter-class>farm.filter.XssFilter</filter-class>-->
  <!--</filter>-->
  <!--<filter-mapping>-->
    <!--<filter-name>xssFilter</filter-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</filter-mapping>-->

  <!--配置全局参数，加载spring的配置文件-->
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:application-context*.xml</param-value>
  </context-param>

  <!--配置前端控制器-->
  <servlet>
    <servlet-name>springMvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <!--配置应用启动的加载springMvc的配置文件-->
      <param-name>contextConfigLocation</param-name>
      <param-value>classpath:spring-mvc.xml</param-value>
    </init-param>
    <!--根据servlet加载顺序，如果不配置或者配置为负数，那么会在请求的时候创建servlet,
    如果配置为正数，会在应用启动的时候创建servlet，正数越小优先级越高-->
    <load-on-startup>1</load-on-startup>
    <async-supported>true</async-supported>
  </servlet>
  <servlet-mapping>
    <servlet-name>springMvc</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <!--在web应用，使用监听器启动spring框架-->
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <!--<servlet>-->
    <!--<servlet-name>springDispatcherServlet</servlet-name>-->
    <!--<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>-->
    <!--&lt;!&ndash; 配置Spring mvc下的配置文件的位置和名称 &ndash;&gt;-->
    <!--<init-param>-->
      <!--<param-name>contextConfigLocation</param-name>-->
      <!--<param-value>/WEB-INF/spring-mvc.xml</param-value>-->
    <!--</init-param>-->
    <!--<load-on-startup>1</load-on-startup>-->
  <!--</servlet>-->

  <!--<servlet-mapping>-->
    <!--<servlet-name>springDispatcherServlet</servlet-name>-->
    <!--<url-pattern>/</url-pattern>-->
  <!--</servlet-mapping>-->
  <!--<context-param>-->
    <!--<param-name>contextConfigLocation</param-name>-->
    <!--<param-value>/WEB-INF/spring-context.xml</param-value>-->
  <!--</context-param>-->

  <!--<listener>-->
    <!--<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>-->
  <!--</listener>-->
  <!--<listener>-->
    <!--<listener-class>net.sf.ehcache.constructs.web.ShutdownListener</listener-class>-->
  <!--</listener>-->
  <!--<servlet>-->
    <!--<servlet-name>springmvc</servlet-name>-->
    <!--<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>-->
    <!--<init-param>-->
      <!--<param-name>contextConfigLocation</param-name>-->
      <!--<param-value>classpath:spring-mvc.xml</param-value>-->
    <!--</init-param>-->
    <!--<load-on-startup>1</load-on-startup>-->
  <!--</servlet>-->
  <!--<servlet-mapping>-->
    <!--<servlet-name>springmvc</servlet-name>-->
    <!--<url-pattern>/</url-pattern>-->
  <!--</servlet-mapping>-->
  <!--<servlet>-->
    <!--<servlet-name>DruidStatView</servlet-name>-->
    <!--<servlet-class>com.alibaba.druid.support.http.StatViewServlet</servlet-class>-->
    <!--<init-param>-->
      <!--<param-name>allow</param-name>-->
      <!--<param-value></param-value>-->
    <!--</init-param>-->
    <!--<init-param>-->
      <!--<param-name>resetEnable</param-name>-->
      <!--<param-value>true</param-value>-->
    <!--</init-param>-->
    <!--<init-param>-->
      <!--<param-name>loginUsername</param-name>-->
      <!--<param-value>admin</param-value>-->
    <!--</init-param>-->
    <!--<init-param>-->
      <!--<param-name>loginPassword</param-name>-->
      <!--<param-value>pollsurvey@2017</param-value>-->
    <!--</init-param>-->
  <!--</servlet>-->
  <!--<servlet-mapping>-->
    <!--<servlet-name>DruidStatView</servlet-name>-->
    <!--<url-pattern>/druid/*</url-pattern>-->
  <!--</servlet-mapping>-->
  <!--<filter>-->
    <!--<filter-name>CorsFilter</filter-name>-->
    <!--<filter-class>com.jianju.ssm.common.filters.CorsFilter</filter-class>-->
  <!--</filter>-->
  <!--<filter-mapping>-->
    <!--<filter-name>CorsFilter</filter-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</filter-mapping>-->
  <!--<filter>-->
    <!--<filter-name>DruidWebStatFilter</filter-name>-->
    <!--<filter-class>com.alibaba.druid.support.http.WebStatFilter</filter-class>-->
    <!--<init-param>-->
      <!--<param-name>exclusions</param-name>-->
      <!--<param-value>*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*</param-value>-->
    <!--</init-param>-->
  <!--</filter>-->
  <!--<filter-mapping>-->
    <!--<filter-name>DruidWebStatFilter</filter-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</filter-mapping>-->
  <!--<filter>-->
    <!--<filter-name>myLogFilter</filter-name>-->
    <!--<filter-class>com.jianju.ssm.common.filters.MyLogFilter</filter-class>-->
  <!--</filter>-->
  <!--<filter-mapping>-->
    <!--<filter-name>myLogFilter</filter-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</filter-mapping>-->
  <!--<filter>-->
    <!--<filter-name>shiroFilter</filter-name>-->
    <!--<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>-->
    <!--<init-param>-->
      <!--<param-name>targetFileterLifecycle</param-name>-->
      <!--<param-value>true</param-value>-->
    <!--</init-param>-->
  <!--</filter>-->
  <!--<filter-mapping>-->
    <!--<filter-name>shiroFilter</filter-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</filter-mapping>-->
  <!--<filter>-->
    <!--<filter-name>CharacterEncodingFilter</filter-name>-->
    <!--<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>-->
    <!--<init-param>-->
      <!--<param-name>encoding</param-name>-->
      <!--<param-value>utf-8</param-value>-->
    <!--</init-param>-->
    <!--<init-param>-->
      <!--<param-name>forceEncoding</param-name>-->
      <!--<param-value>true</param-value>-->
    <!--</init-param>-->
  <!--</filter>-->
  <!--<filter-mapping>-->
    <!--<filter-name>CharacterEncodingFilter</filter-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</filter-mapping>-->
  <!-- Servlet Filters ================================================ -->

  <!--&lt;!&ndash;-->
    <!-- - Declare a filter for multipart MIME handling-->
    <!--&ndash;&gt;-->
  <!--<filter>-->
    <!--<description>Multipart MIME handling filter for Cocoon</description>-->
    <!--<display-name>Cocoon multipart filter</display-name>-->
    <!--<filter-name>CocoonMultipartFilter</filter-name>-->
    <!--<filter-class>org.apache.cocoon.servlet.multipart.MultipartFilter</filter-class>-->
  <!--</filter>-->

  <!--&lt;!&ndash;-->
    <!-- - Declare a filter for debugging incoming request-->
    <!--&ndash;&gt;-->
  <!--<filter>-->
    <!--<description>Log debug information about each request</description>-->
    <!--<display-name>Cocoon debug filter</display-name>-->
    <!--<filter-name>CocoonDebugFilter</filter-name>-->
    <!--<filter-class>org.apache.cocoon.servlet.DebugFilter</filter-class>-->
  <!--</filter>-->

  <!--&lt;!&ndash; Filter mappings ================================================ &ndash;&gt;-->

  <!--&lt;!&ndash;-->
    <!-- - Use the Cocoon multipart filter together with the Cocoon demo webapp-->
    <!--&ndash;&gt;-->
  <!--<filter-mapping>-->
    <!--<filter-name>CocoonMultipartFilter</filter-name>-->
    <!--<servlet-name>Cocoon</servlet-name>-->
  <!--</filter-mapping>-->
  <!--<filter-mapping>-->
    <!--<filter-name>CocoonMultipartFilter</filter-name>-->
    <!--<servlet-name>DispatcherServlet</servlet-name>-->
  <!--</filter-mapping>-->

  <!--&lt;!&ndash;-->
    <!-- - Use the Cocoon debug filter together with the Cocoon demo webapp-->
  <!--<filter-mapping>-->
    <!--<filter-name>CocoonDebugFilter</filter-name>-->
    <!--<servlet-name>Cocoon</servlet-name>-->
  <!--</filter-mapping>-->
    <!--&ndash;&gt;-->

  <!--&lt;!&ndash; Servlet Context Listener ======================================= &ndash;&gt;-->

  <!--&lt;!&ndash;-->
    <!-- - Declare Spring context listener which sets up the Spring Application Context-->
    <!-- - containing all Cocoon components (and user defined beans as well).-->
    <!--&ndash;&gt;-->
  <!--<listener>-->
    <!--<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>-->
  <!--</listener>-->

  <!--&lt;!&ndash;-->
    <!-- - Declare Spring request listener which sets up the required RequestAttributes-->
    <!-- - to support Springs and Cocoon custom bean scopes like the request scope or the-->
    <!-- - session scope.-->
    <!--&ndash;&gt;-->
  <!--<listener>-->
    <!--<listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>-->
  <!--</listener>-->

  <!--&lt;!&ndash; Servlet Configuration ========================================== &ndash;&gt;-->

  <!--&lt;!&ndash;-->
    <!-- - Servlet that dispatches requests to the Spring managed block servlets-->
    <!--&ndash;&gt;-->
  <!--<servlet>-->
    <!--<description>Cocoon blocks dispatcher</description>-->
    <!--<display-name>DispatcherServlet</display-name>-->
    <!--<servlet-name>DispatcherServlet</servlet-name>-->
    <!--<servlet-class>org.apache.cocoon.servletservice.DispatcherServlet</servlet-class>-->
    <!--<load-on-startup>1</load-on-startup>-->
  <!--</servlet>-->

  <!--&lt;!&ndash; URL space mappings ============================================= &ndash;&gt;-->

  <!--&lt;!&ndash;-->
    <!-- - Cocoon handles all the URL space assigned to the webapp using its sitemap.-->
    <!-- - It is recommended to leave it unchanged. Under some circumstances though-->
    <!-- - (like integration with proprietary webapps or servlets) you might have-->
    <!-- - to change this parameter.-->
    <!--&ndash;&gt;-->
  <!--<servlet-mapping>-->
    <!--<servlet-name>DispatcherServlet</servlet-name>-->
    <!--<url-pattern>/*</url-pattern>-->
  <!--</servlet-mapping>-->
  <!--<listener> <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class> </listener>-->
  <!--<context-param> <param-name>contextConfigLocation</param-name>-->
    <!--&lt;!&ndash; <param-value>/WEB-INF/applicationContext-*.xml,classpath*:applicationContext-*.xml</param-value> &ndash;&gt;-->
    <!--&lt;!&ndash; 加入你的配置文件放在了src下的，命名规则为：applicationContext-*.xml形式，则可以从以下方式配置&ndash;&gt;-->
    <!--<param-value>classpath:applicationContext-*.xml</param-value>-->
  <!--</context-param>-->
</web-app>
        