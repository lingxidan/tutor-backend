<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shizhe.dao.UserDao">
  
  <resultMap id="BaseResultMap" type="User">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="name" jdbcType="CHAR" property="name" />
    <result column="password" jdbcType="CHAR" property="password" />
    <result column="idcard" jdbcType="CHAR" property="idcard" />
    <result column="phone" jdbcType="CHAR" property="phone" />
    <result column="email" jdbcType="CHAR" property="email" />
    <result column="address" jdbcType="CHAR" property="address" />
  </resultMap>
  <select id="getAll" resultType="shizhe.bean.User">
    select * from user
  </select>
  <select id="login" parameterType="java.lang.String" resultType="shizhe.bean.User">
    select * from user WHERE
    (email=#{name} and `password`=#{password})
    or (phone=#{name} and `password`=#{password})
  </select>
  <!--<select id="registe" parameterType="shizhe.bean.User" resultType="shizhe.bean.User">-->
     <!--insert into user (`name`, `password`,-->
      <!--idcard, phone, email,-->
      <!--address)-->
    <!--values (#{name}, #{password},-->
      <!--#{idcard}, #{phone}, #{email},-->
      <!--#{address})-->
  <!--</select>-->
  <insert id="registe" useGeneratedKeys="true" keyProperty="id" parameterType="shizhe.bean.User">
    insert into user (`name`, `password`,
      idcard, phone, email,
      address, regsitedt)
    values (#{name}, #{password},
      #{idcard}, #{phone}, #{email},
      #{address},#{regsitedt})
  </insert>
  <!--<sql id="Base_Column_List">-->
    <!--id, `name`, `password`, idcard, phone, email, address-->
  <!--</sql>-->
  <!--<select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">-->
    <!--select -->
    <!--<include refid="Base_Column_List" />-->
    <!--from user-->
    <!--where id = #{id}-->
  <!--</select>-->
  <!--<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">-->
    <!--delete from user-->
    <!--where id = #{id}-->
  <!--</delete>-->
  <!--<insert id="insert" parameterType="shizhe.dao.UserDAO">-->
    <!--insert into user (id, `name`, `password`, -->
      <!--idcard, phone, email, address-->
      <!--)-->
    <!--values (#{id}, #{name}, #{password}, -->
      <!--#{idcard}, #{phone}, #{email}, #{address}-->
      <!--)-->
  <!--</insert>-->
  <!--<insert id="insertSelective" parameterType="shizhe.beanser">-->
    <!--insert into user-->
    <!--<trim prefix="(" suffix=")" suffixOverrides=",">-->
      <!--<if test="id != null">-->
        <!--id,-->
      <!--</if>-->
      <!--<if test="name != null">-->
        <!--`name`,-->
      <!--</if>-->
      <!--<if test="password != null">-->
        <!--`password`,-->
      <!--</if>-->
      <!--<if test="idcard != null">-->
        <!--idcard,-->
      <!--</if>-->
      <!--<if test="phone != null">-->
        <!--phone,-->
      <!--</if>-->
      <!--<if test="email != null">-->
        <!--email,-->
      <!--</if>-->
      <!--<if test="address != null">-->
        <!--address,-->
      <!--</if>-->
    <!--</trim>-->
    <!--<trim prefix="values (" suffix=")" suffixOverrides=",">-->
      <!--<if test="id != null">-->
        <!--#{id},-->
      <!--</if>-->
      <!--<if test="name != null">-->
        <!--#{name},-->
      <!--</if>-->
      <!--<if test="password != null">-->
        <!--#{password},-->
      <!--</if>-->
      <!--<if test="idcard != null">-->
        <!--#{idcard},-->
      <!--</if>-->
      <!--<if test="phone != null">-->
        <!--#{phone},-->
      <!--</if>-->
      <!--<if test="email != null">-->
        <!--#{email},-->
      <!--</if>-->
      <!--<if test="address != null">-->
        <!--#{address},-->
      <!--</if>-->
    <!--</trim>-->
  <!--</insert>-->
  <!--<update id="updateByPrimaryKeySelective" parameterType="shizhe.beanser">-->
    <!--update user-->
    <!--<set>-->
      <!--<if test="name != null">-->
        <!--`name` = #{name},-->
      <!--</if>-->
      <!--<if test="password != null">-->
        <!--`password` = #{password},-->
      <!--</if>-->
      <!--<if test="idcard != null">-->
        <!--idcard = #{idcard},-->
      <!--</if>-->
      <!--<if test="phone != null">-->
        <!--phone = #{phone},-->
      <!--</if>-->
      <!--<if test="email != null">-->
        <!--email = #{email},-->
      <!--</if>-->
      <!--<if test="address != null">-->
        <!--address = #{address},-->
      <!--</if>-->
    <!--</set>-->
    <!--where id = #{id}-->
  <!--</update>-->
  <update id="edit" parameterType="shizhe.bean.Volunteer">
    update user
    set
      `password` = #{password},
      idcard = #{idcard},
      phone = #{phone},
      email = #{email},
      address = #{address}
    where id = #{userId}
  </update>
  <update id="editRecruiter" parameterType="shizhe.bean.Recruiter">
    update user
    set
      `password` = #{password},
      idcard = #{idcard},
      phone = #{phone},
      email = #{email},
      address = #{address}
    where id = #{userId}
  </update>
</mapper>